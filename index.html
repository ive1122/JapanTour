<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="doc-title">æ—¥æœ¬ä¹‹æ—…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom Scrollbar for a cleaner look */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        /* Chart Container Specifics */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container { height: 350px; }
        }
        
        /* Smooth scrolling for anchor links */
        html { scroll-behavior: smooth; }

        /* No scrollbar for the day tabs */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-slate-50 text-slate-700 font-sans antialiased">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md shadow-sm border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex-shrink-0 flex items-center gap-2">
                    <span class="text-2xl">ğŸŒ¸</span>
                    <span class="font-bold text-xl text-slate-800 tracking-tight" data-i18n="nav_title">æ—¥æœ¬ä¹‹æ—…</span>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="hidden md:flex space-x-8">
                        <a href="#overview" class="text-slate-600 hover:text-rose-500 px-3 py-2 rounded-md text-sm font-medium transition-colors" data-i18n="nav_overview">æ¦‚è§ˆ</a>
                        <a href="#itinerary" class="text-slate-600 hover:text-rose-500 px-3 py-2 rounded-md text-sm font-medium transition-colors" data-i18n="nav_itinerary">æ¯æ—¥è¡Œç¨‹</a>
                        <a href="#food" class="text-slate-600 hover:text-rose-500 px-3 py-2 rounded-md text-sm font-medium transition-colors" data-i18n="nav_food">ç¾é£Ÿåœ°å›¾</a>
                        <a href="#logistics" class="text-slate-600 hover:text-rose-500 px-3 py-2 rounded-md text-sm font-medium transition-colors" data-i18n="nav_logistics">åå‹¤ä¿¡æ¯</a>
                    </div>
                    <!-- Language Toggle -->
                    <button id="lang-toggle-btn" class="flex items-center justify-center h-10 w-24 px-3 text-sm font-medium rounded-full text-white bg-indigo-500 hover:bg-indigo-600 transition-colors">
                        English
                    </button>
                    <!-- Mobile menu button placeholder (simplified for this scope) -->
                    <button id="mobile-menu-btn" class="md:hidden text-slate-600 text-xl">â˜°</button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu (Hidden by default, toggled via JS) -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-b border-slate-200">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#overview" class="block text-slate-600 hover:text-rose-500 px-3 py-2 rounded-md text-base font-medium" data-i18n="nav_overview">æ¦‚è§ˆ</a>
                <a href="#itinerary" class="block text-slate-600 hover:text-rose-500 px-3 py-2 rounded-md text-base font-medium" data-i18n="nav_itinerary">è¡Œç¨‹</a>
                <a href="#food" class="block text-slate-600 hover:text-rose-500 px-3 py-2 rounded-md text-base font-medium" data-i18n="nav_food">ç¾é£Ÿ</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section (FIXED: Now fully centered and responsive) -->
    <header class="relative bg-white overflow-hidden py-16 sm:py-24 bg-rose-50/50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl tracking-tight font-extrabold text-slate-900 sm:text-5xl md:text-6xl">
                <span class="block xl:inline" data-i18n="hero_main_1">7 Days of Zen in</span>
                <span class="block text-rose-500 xl:inline" data-i18n="hero_main_2">Tokyo, Kyoto & Osaka</span>
            </h1>
            <p class="mt-3 text-base justify-center text-slate-500 sm:mt-5 sm:text-lg sm:mx-auto md:mt-5 md:text-xl lg:mx-0" data-i18n="hero_subtitle">
                ä¸ºæ‚¨ç²¾å¿ƒç­–åˆ’çš„èœœæœˆä½“éªŒã€‚
            </p>
            <div class="mt-5 sm:mt-8 flex justify-center gap-4">
                <div class="rounded-md shadow">
                    <a href="#itinerary" class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-full text-white bg-rose-500 hover:bg-rose-600 md:py-4 md:text-lg transition-all" data-i18n="btn_start">
                        å¼€å¯æ—…ç¨‹
                    </a>
                </div>
                <div class="mt-3 sm:mt-0 sm:ml-3">
                    <a href="#checklist" class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-full text-rose-700 bg-rose-100 hover:bg-rose-200 md:py-4 md:text-lg transition-all" data-i18n="btn_check">
                        è¡Œå‰æ¸…å•
                    </a>
                </div>
            </div>
        </div>
        <!-- Decorative bg block removed for centering -->
    </header>

    <main>
        <!-- Section: Trip Overview & Analytics -->
        <section id="overview" class="py-12 bg-slate-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-10">
                    <h2 class="text-base text-rose-600 font-semibold tracking-wide uppercase" data-i18n="section_analytics">è¡Œç¨‹åˆ†æ</h2>
                    <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-slate-900 sm:text-4xl" data-i18n="section_glance">
                        ä¸€è§ˆæ— ä½™
                    </p>
                    <p class="mt-4 max-w-2xl text-xl text-slate-500 mx-auto" data-i18n="section_analytics_subtitle">
                        æ‚¨çš„æ–°é¢„ç®—åˆ†é… (æ€»è®¡ RM 10,740) ä»¥åŠå†’é™©ä¸ä¼‘é—²çš„å¹³è¡¡ã€‚
                    </p>
                </div>
                
                <!-- Diagram Trigger (REMOVED: The disruptive placeholder text has been removed.) -->

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <!-- Chart 1: Budget Breakdown -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-lg font-medium text-slate-900 mb-4 text-center" data-i18n="section_budget">é¢„ä¼°é¢„ç®—åˆ†é… (MYR)</h3>
                        <div class="chart-container">
                            <canvas id="budgetChart"></canvas>
                        </div>
                        <p class="text-xs text-center text-slate-400 mt-2" data-i18n="chart_note_1">*åŸºäºæ‚¨ RM 10,740 çš„æ€»é¢„ç®—ï¼Œå·²åŒ…å«æœºç¥¨è´¹ç”¨ã€‚</p>
                    </div>

                    <!-- Chart 2: Cost vs Time Analysis -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-lg font-medium text-slate-900 mb-4 text-center" data-i18n="section_cost_time">æˆæœ¬ä¸æ—¶é—´åˆ†æ</h3>
                        <div class="chart-container">
                            <canvas id="comparisonChart"></canvas>
                        </div>
                         <p class="text-xs text-center text-slate-400 mt-2" data-i18n="chart_note_2">é«˜æˆæœ¬é€šå¸¸æŒ‡ä¸»é¢˜ä¹å›­æˆ–è±ªåé¤é¥®ã€‚</p>
                    </div>
                </div>
                
                <!-- Detailed Budget Breakdown Section -->
                <div class="mt-12 bg-white rounded-xl shadow-lg overflow-hidden">
                    <button id="toggle-budget-btn" class="w-full text-left p-6 flex justify-between items-center text-xl font-bold text-slate-900 bg-rose-100 hover:bg-rose-200 transition-colors" onclick="toggleBudgetDetails()">
                        <span data-i18n="section_detailed_breakdown">è¯¦ç»†é¢„ç®—åˆ†è§£ (RM 10,740 æ€»è®¡)</span>
                        <span id="toggle-icon">â–¼</span>
                    </button>
                    <div id="budget-details-content" class="p-6 hidden">
                        <!-- Budget table inserted here by JS -->
                    </div>
                </div>
            </div>
        </section>


        <!-- Section: Interactive Itinerary -->
        <section id="itinerary" class="py-16 bg-white">
            <!-- Widen the main container for the tabs -->
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                
                <div class="text-center mb-12 max-w-4xl mx-auto">
                    <h2 class="text-3xl font-extrabold text-slate-900" data-i18n="section_daily_itinerary">æ‚¨çš„æ¯æ—¥è¡Œç¨‹å®‰æ’</h2>
                    <p class="mt-4 text-lg text-slate-500">
                        3æœˆ28æ—¥ - 4æœˆ03æ—¥ | ä¸œäº¬ â€¢ äº¬éƒ½ â€¢ å¤§é˜ª
                    </p>
                </div>

                <!-- Day Selector Tabs - Now wider (up to 7xl) -->
                <div class="flex overflow-x-auto pb-4 mb-8 gap-2 justify-start md:justify-around no-scrollbar" id="day-tabs">
                    <!-- JS will populate buttons here -->
                </div>

                <!-- Dynamic Content Container - Constrained for readability -->
                <div id="itinerary-content" class="max-w-4xl mx-auto bg-slate-50 rounded-2xl p-6 md:p-8 shadow-inner min-h-[500px]">
                    <!-- JS will inject timeline here -->
                </div>
            </div>
        </section>

        <!-- Section: Food Map -->
        <section id="food" class="py-16 bg-rose-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="md:flex md:items-center md:justify-between mb-8">
                    <div class="flex-1 min-w-0">
                        <h2 class="text-2xl font-bold leading-7 text-slate-900 sm:text-3xl sm:truncate" data-i18n="food_map_title">
                            ç¾é£Ÿåœ°å›¾ ğŸœ
                        </h2>
                        <p class="mt-1 text-sm text-slate-500" data-i18n="food_map_subtitle">ä¸ºæ‚¨ç²¾é€‰çš„å¿…å°ç¾é£Ÿåœ°ç‚¹ã€‚</p>
                    </div>
                    <div class="mt-4 flex md:mt-0 md:ml-4 bg-white p-1 rounded-lg shadow-sm">
                        <button onclick="filterFood('all', event)" class="food-filter active px-4 py-2 text-sm font-medium rounded-md text-slate-700 hover:bg-rose-100 focus:outline-none focus:ring-2 focus:ring-rose-500 transition-colors bg-rose-100 text-rose-700" data-i18n="food_filter_all">å…¨éƒ¨</button>
                        <button onclick="filterFood('main', event)" class="food-filter px-4 py-2 text-sm font-medium rounded-md text-slate-700 hover:bg-rose-100 transition-colors" data-i18n="food_filter_main">ä¸»é¤</button>
                        <button onclick="filterFood('snack', event)" class="food-filter px-4 py-2 text-sm font-medium rounded-md text-slate-700 hover:bg-rose-100 transition-colors" data-i18n="food_filter_snack">è¡—å¤´ç¾é£Ÿ</button>
                        <button onclick="filterFood('cafe', event)" class="food-filter px-4 py-2 text-sm font-medium rounded-md text-slate-700 hover:bg-rose-100 transition-colors" data-i18n="food_filter_cafe">å’–å•¡/ç”œç‚¹</button>
                    </div>
                </div>

                <div id="food-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- JS will populate cards here -->
                </div>
            </div>
        </section>

        <!-- Section: Logistics & Accommodation -->
        <section id="logistics" class="py-16 bg-white border-t border-slate-200">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-extrabold text-slate-900 mb-8 text-center" data-i18n="logistics_title">ä½å®¿ä¸äº¤é€š</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Accommodation -->
                    <div class="bg-slate-50 rounded-xl p-6 border border-slate-200 hover:shadow-md transition-shadow">
                        <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center" data-i18n="logistics_stays">
                            <span class="mr-2">ğŸ¨</span> æ¨èä½å®¿
                        </h3>
                        <p class="text-sm text-slate-600 mb-4" data-i18n="logistics_stays_note">é¢„ç®—å·²è°ƒæ•´è‡³å¹³å‡ RM 350/æ™šï¼Œèƒ½ä½åˆ°æ›´èˆ’é€‚çš„é…’åº—ã€‚</p>
                        <div class="space-y-4">
                            <div class="bg-white p-4 rounded-lg shadow-sm">
                                <span class="text-xs font-bold text-rose-500 uppercase" data-i18n="logistics_tokyo">ä¸œäº¬ (3æ™š)</span>
                                <h4 class="font-semibold text-lg">Hotel Gracery Shinjuku æˆ–åŒçº§</h4>
                                <p class="text-sm text-slate-600" data-i18n="logistics_tokyo_desc">ä½ç½®ä¸­å¿ƒï¼Œä»¥å“¥æ–¯æ‹‰å¤´é—»åã€‚é è¿‘äº¤é€šæ¢çº½ã€‚</p>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow-sm">
                                <span class="text-xs font-bold text-rose-500 uppercase" data-i18n="logistics_kyoto">äº¬éƒ½ (1æ™š)</span>
                                <h4 class="font-semibold text-lg">Cross Hotel Kyoto æˆ–åŒçº§</h4>
                                <p class="text-sm text-slate-600" data-i18n="logistics_kyoto_desc">æ—¶å°šã€ç°ä»£ï¼Œæ­¥è¡Œå¯è‡³ç¥—å›­/å…ˆæ–—ç”ºã€‚</p>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow-sm">
                                <span class="text-xs font-bold text-rose-500 uppercase" data-i18n="logistics_osaka">å¤§é˜ª (2æ™š)</span>
                                <h4 class="font-semibold text-lg">The Park Front Hotel æˆ–åŒçº§</h4>
                                <p class="text-sm text-slate-600" data-i18n="logistics_osaka_desc">æ­£å¯¹USJã€‚éå¸¸é€‚åˆæ—©èµ·æ¸¸ç©ã€‚</p>
                            </div>
                        </div>
                    </div>

                    <!-- Transport -->
                    <div class="bg-slate-50 rounded-xl p-6 border border-slate-200 hover:shadow-md transition-shadow">
                        <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center" data-i18n="logistics_transport">
                            <span class="mr-2">ğŸš…</span> åŸé™…äº¤é€š
                        </h3>
                         <p class="text-sm text-slate-600 mb-4" data-i18n="logistics_transport_note">RM 1,400 çš„é¢„ç®—ç¡®ä¿äº†ä¸¤äººä»½æ–°å¹²çº¿å’Œæ‰€æœ‰æœ¬åœ°äº¤é€šç»°ç»°æœ‰ä½™ã€‚</p>
                        <div class="space-y-4">
                            <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-indigo-500">
                                <h4 class="font-semibold" data-i18n="logistics_shinkansen_to_kyoto">ä¸œäº¬ â†’ äº¬éƒ½ (2äºº)</h4>
                                <p class="text-sm text-slate-600 mt-1"><strong>æ–°å¹²çº¿ å…‰å·/å¸Œæœ›å·</strong></p>
                                <p class="text-xs text-slate-500" data-i18n="logistics_shinkansen_to_kyoto_desc">çº¦ 2 å°æ—¶ 15 åˆ†é’Ÿã€‚é¢„è®¢å³ä¾§ï¼ˆEåº§ï¼‰åº§ä½å¯æ¬£èµå¯Œå£«å±±æ™¯è§‚ã€‚</p>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-indigo-500">
                                <h4 class="font-semibold" data-i18n="logistics_kyoto_to_osaka">äº¬éƒ½ â†’ å¤§é˜ª (2äºº)</h4>
                                <p class="text-sm text-slate-600 mt-1"><strong>JRæ–°å¿«é€Ÿåˆ—è½¦</strong></p>
                                <p class="text-xs text-slate-500" data-i18n="logistics_kyoto_to_osaka_desc">çº¦ 30 åˆ†é’Ÿã€‚æ™®é€šé€šå‹¤åˆ—è½¦ï¼Œæ— éœ€é¢„è®¢ã€‚</p>
                            </div>
                             <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-emerald-500">
                                <h4 class="font-semibold" data-i18n="logistics_ic_card">åŸå¸‚äº¤é€šï¼šICå¡ (2äºº)</h4>
                                <p class="text-sm text-slate-600 mt-1"><strong>Suica æˆ– Pasmo (Apple Pay)</strong></p>
                                <p class="text-xs text-slate-500" data-i18n="logistics_ic_detail">å‘æ‰‹æœºå……å€¼çº¦ RM500 ç­‰å€¼é‡‘é¢ï¼Œç”¨äºåœ°é“/ä¾¿åˆ©åº—ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section: Pre-Trip Checklist -->
        <section id="checklist" class="py-12 bg-slate-900 text-white">
            <div class="max-w-3xl mx-auto px-4 text-center">
                <h2 class="text-2xl font-bold mb-6" data-i18n="checklist_title">è¡Œå‰æ¸…å• âœ…</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-left">
                    <label class="flex items-center space-x-3 p-3 bg-slate-800 rounded-lg cursor-pointer hover:bg-slate-700 transition">
                        <input type="checkbox" class="form-checkbox h-5 w-5 text-rose-500 rounded border-slate-500 focus:ring-rose-500">
                        <span data-i18n="checklist_vjw">Visit Japan Web (æµ·å…³/å…¥å¢ƒ)</span>
                    </label>
                    <label class="flex items-center space-x-3 p-3 bg-slate-800 rounded-lg cursor-pointer hover:bg-slate-700 transition">
                        <input type="checkbox" class="form-checkbox h-5 w-5 text-rose-500 rounded border-slate-500 focus:ring-rose-500">
                        <span data-i18n="checklist_usj">USJ å¿«é€Ÿé€šè¡Œè¯ (æå‰2ä¸ªæœˆè´­ä¹°!)</span>
                    </label>
                    <label class="flex items-center space-x-3 p-3 bg-slate-800 rounded-lg cursor-pointer hover:bg-slate-700 transition">
                        <input type="checkbox" class="form-checkbox h-5 w-5 text-rose-500 rounded border-slate-500 focus:ring-rose-500">
                        <span data-i18n="checklist_shinkansen">æ–°å¹²çº¿è½¦ç¥¨ (SmartEx App)</span>
                    </label>
                    <label class="flex items-center space-x-3 p-3 bg-slate-800 rounded-lg cursor-pointer hover:bg-slate-700 transition">
                        <input type="checkbox" class="form-checkbox h-5 w-5 text-rose-500 rounded border-slate-500 focus:ring-rose-500">
                        <span data-i18n="checklist_insurance">æ—…è¡Œä¿é™©</span>
                    </label>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-white border-t border-slate-200 py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-slate-400 text-sm" data-i18n="footer">Â© 2025 æ—¥æœ¬èœœæœˆæ—…è¡Œè®¡åˆ’ã€‚ç¥æ‚¨æ—…é€”æ„‰å¿«ï¼</p>
        </div>
    </footer>
    
    <script>
        let currentLang = 'cn';
        let budgetChartInstance = null;
        let comparisonChartInstance = null;

        // Helper function to generate a robust Google Maps search link
        const generateMapsLink = (query) => {
            return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`;
        };

        // --- Data Definitions (Chinese and English) ---
        
        const translationMap = {
            nav_title: { cn: "æ—¥æœ¬èœœæœˆä¹‹æ—…", en: "Japan Honeymoon Itinerary" },
            nav_overview: { cn: "æ¦‚è§ˆ", en: "Overview" },
            nav_itinerary: { cn: "æ¯æ—¥è¡Œç¨‹", en: "Daily Itinerary" },
            nav_food: { cn: "ç¾é£Ÿåœ°å›¾", en: "Food Map" },
            nav_logistics: { cn: "åå‹¤ä¿¡æ¯", en: "Logistics" },
            hero_main_1: { cn: "ä¸ƒæ—¥ç¦…æ„ä¹‹æ—…ï¼š", en: "7 Days of Zen in" },
            hero_main_2: { cn: "ä¸œäº¬ã€äº¬éƒ½ä¸å¤§é˜ª", en: "Tokyo, Kyoto & Osaka" },
            hero_subtitle: { cn: "ä¸ºæ‚¨ç²¾å¿ƒç­–åˆ’çš„èœœæœˆä½“éªŒã€‚", en: "Your curated honeymoon experience." },
            btn_start: { cn: "å¼€å¯æ—…ç¨‹", en: "Start the Journey" },
            btn_check: { cn: "è¡Œå‰æ¸…å•", en: "Pre-Trip Checklist" },
            section_analytics: { cn: "è¡Œç¨‹åˆ†æ", en: "TRIP ANALYTICS" },
            section_glance: { cn: "ä¸€è§ˆæ— ä½™", en: "At a Glance" },
            section_analytics_subtitle: { cn: "æ‚¨çš„æ–°é¢„ç®—åˆ†é… (æ€»è®¡ RM 10,740) ä»¥åŠå†’é™©ä¸ä¼‘é—²çš„å¹³è¡¡ã€‚", en: "Your new budget distribution (Total RM 10,740) and balance of adventure vs. relaxation." },
            section_budget: { cn: "é¢„ä¼°é¢„ç®—åˆ†é… (MYR)", en: "Estimated Budget Breakdown (MYR)" },
            chart_note_1: { cn: "*åŸºäºæ‚¨ RM 10,740 çš„æ€»é¢„ç®—ï¼Œå·²åŒ…å«æœºç¥¨è´¹ç”¨ã€‚", en: "*Based on your total budget of RM 10,740, including flight costs." },
            section_cost_time: { cn: "æˆæœ¬ä¸æ—¶é—´åˆ†æ", en: "Cost vs. Time Analysis" },
            chart_note_2: { cn: "é«˜æˆæœ¬é€šå¸¸æŒ‡ä¸»é¢˜ä¹å›­æˆ–è±ªåé¤é¥®ã€‚", en: "High cost usually refers to theme parks or luxury dining." },
            section_detailed_breakdown: { cn: "è¯¦ç»†é¢„ç®—åˆ†è§£ (RM 10,740 æ€»è®¡)", en: "Detailed Budget Breakdown (RM 10,740 Total)" },
            section_daily_itinerary: { cn: "æ‚¨çš„æ¯æ—¥è¡Œç¨‹å®‰æ’", en: "Your Daily Itinerary" },
            food_map_title: { cn: "ç¾é£Ÿåœ°å›¾ ğŸœ", en: "Food Map ğŸœ" },
            food_map_subtitle: { cn: "ä¸ºæ‚¨ç²¾é€‰çš„å¿…å°ç¾é£Ÿåœ°ç‚¹ã€‚", en: "Curated must-try dining locations." },
            food_filter_all: { cn: "å…¨éƒ¨", en: "All" },
            food_filter_main: { cn: "ä¸»é¤", en: "Main Course" },
            food_filter_snack: { cn: "è¡—å¤´ç¾é£Ÿ", en: "Street Food" },
            food_filter_cafe: { cn: "å’–å•¡/ç”œç‚¹", en: "Cafe/Dessert" },
            logistics_title: { cn: "ä½å®¿ä¸äº¤é€š", en: "Accommodation & Transport" },
            logistics_stays: { cn: "æ¨èä½å®¿", en: "Recommended Stays" },
            logistics_stays_note: { cn: "é¢„ç®—å·²è°ƒæ•´è‡³å¹³å‡ RM 350/æ™šï¼Œèƒ½ä½åˆ°æ›´èˆ’é€‚çš„é…’åº—ã€‚", en: "Budget adjusted to average RM 350/night for more comfortable hotel options." },
            logistics_tokyo: { cn: "ä¸œäº¬ (3æ™š)", en: "TOKYO (3 Nights)" },
            logistics_tokyo_desc: { cn: "ä½ç½®ä¸­å¿ƒï¼Œä»¥å“¥æ–¯æ‹‰å¤´é—»åã€‚é è¿‘äº¤é€šæ¢çº½ã€‚", en: "Central location, famous for the Godzilla head. Close to major transport hubs." },
            logistics_kyoto: { cn: "äº¬éƒ½ (1æ™š)", en: "KYOTO (1 Night)" },
            logistics_kyoto_desc: { cn: "æ—¶å°šã€ç°ä»£ï¼Œæ­¥è¡Œå¯è‡³ç¥—å›­/å…ˆæ–—ç”ºã€‚", en: "Stylish, modern, walking distance to Gion/Pontocho." },
            logistics_osaka: { cn: "å¤§é˜ª (2æ™š)", en: "OSAKA (2 Nights)" },
            logistics_osaka_desc: { cn: "æ­£å¯¹USJã€‚éå¸¸é€‚åˆæ—©èµ·æ¸¸ç©ã€‚", en: "Directly opposite USJ. Great for early starts." },
            logistics_transport: { cn: "åŸé™…äº¤é€š", en: "Inter-City Transport" },
            logistics_transport_note: { cn: "RM 1,400 çš„é¢„ç®—ç¡®ä¿äº†ä¸¤äººä»½æ–°å¹²çº¿å’Œæ‰€æœ‰æœ¬åœ°äº¤é€šç»°ç»°æœ‰ä½™ã€‚", en: "The RM 1,400 budget ensures Shinkansen for two and all local transport is covered comfortably." },
            logistics_shinkansen_to_kyoto: { cn: "ä¸œäº¬ â†’ äº¬éƒ½ (2äºº)", en: "Tokyo â†’ Kyoto (2 pax)" },
            logistics_shinkansen_to_kyoto_desc: { cn: "çº¦ 2 å°æ—¶ 15 åˆ†é’Ÿã€‚é¢„è®¢å³ä¾§ï¼ˆEåº§ï¼‰åº§ä½å¯æ¬£èµå¯Œå£«å±±æ™¯è§‚ã€‚", en: "Approx. 2 hrs 15 mins. Book a right-side (E seat) for potential Fuji view." },
            logistics_kyoto_to_osaka: { cn: "äº¬éƒ½ â†’ å¤§é˜ª (2äºº)", en: "Kyoto â†’ Osaka (2 pax)" },
            logistics_kyoto_to_osaka_desc: { cn: "çº¦ 30 åˆ†é’Ÿã€‚æ™®é€šé€šå‹¤åˆ—è½¦ï¼Œæ— éœ€é¢„è®¢ã€‚", en: "Approx. 30 mins. Regular commuter train, no reservation needed." },
            logistics_ic_card: { cn: "åŸå¸‚äº¤é€šï¼šICå¡ (2äºº)", en: "City Transport: IC Card (2 pax)" },
            logistics_ic_detail: { cn: "å‘æ‰‹æœºå……å€¼çº¦ RM500 ç­‰å€¼é‡‘é¢ï¼Œç”¨äºåœ°é“/ä¾¿åˆ©åº—ã€‚", en: "Load ~RM500 equivalent onto phone for subway/convenience stores." },
            checklist_title: { cn: "è¡Œå‰æ¸…å• âœ…", en: "Pre-Trip Checklist âœ…" },
            checklist_vjw: { cn: "Visit Japan Web (æµ·å…³/å…¥å¢ƒ)", en: "Visit Japan Web (Customs/Immigration)" },
            checklist_usj: { cn: "USJ å¿«é€Ÿé€šè¡Œè¯ (æå‰2ä¸ªæœˆè´­ä¹°!)", en: "USJ Express Pass (Book 2 months ahead!)" },
            checklist_shinkansen: { cn: "æ–°å¹²çº¿è½¦ç¥¨ (SmartEx App)", en: "Shinkansen Tickets (SmartEx App)" },
            checklist_insurance: { cn: "æ—…è¡Œä¿é™©", en: "Travel Insurance" },
            footer: { cn: "Â© 2025 æ—¥æœ¬èœœæœˆæ—…è¡Œè®¡åˆ’ã€‚ç¥æ‚¨æ—…é€”æ„‰å¿«ï¼", en: "Â© 2025 Japan Honeymoon Planner. Have a wonderful trip!" },
        };

        const itineraryDataCN = [
            {
                day: 1, date: "3æœˆ28æ—¥", title: "å‰éš†å¡å‡ºå‘ä¸æŠµè¾¾ä¸œäº¬ (æ·±å¤œ)", location: "ä¸œäº¬ (æ–°å®¿)",
                events: [
                    { time: "å¾…å®š", title: "ä»å‰éš†å¡å‡ºå‘", desc: "äº«å—æ‚¨çš„èˆªç­ï¼æ ¹æ®å®é™…èˆªç­æ—¶é—´ï¼ŒæŸ¥è¯¢æŠµè¾¾æœºåœº (NRT/HND) çš„ç«è½¦æ—¶åˆ»è¡¨ (NEX/Skyliner)ã€‚", icon: "âœˆï¸", transport: "é£æœº", duration: "7å°æ—¶", link: "https://www.narita-airport.jp/ch/access/train" },
                    { time: "20:00-22:50", title: "æŠµè¾¾ä¸æ¸…å…³", desc: "åŠç†æµ·å…³å’Œå…¥å¢ƒæ‰‹ç»­ã€‚é¢†å–é¢„è®¢ç‰©å“ï¼ˆå¦‚ WiFi ç­‰ï¼‰ã€‚", icon: "ğŸ›‚", transport: "æµ·å…³", duration: "1å°æ—¶", link: "https://www.narita-airport.jp/ch/access" },
                    { time: "22:00-00:30", title: "ä¹˜ç«è½¦/å‡ºç§Ÿè½¦å‰å¾€æ–°å®¿", desc: "æ­ä¹˜æœ€å¿«çš„äº¤é€šå·¥å…·å‰å¾€æ–°å®¿ã€‚è¯·æ³¨æ„ï¼Œå¤§å¤šæ•°ç‰¹å¿«åˆ—è½¦åœ¨æ™šä¸Š 11 ç‚¹å·¦å³åœè¿ã€‚", icon: "ğŸš…", transport: "ç«è½¦/å‡ºç§Ÿè½¦", duration: "1.5å°æ—¶", link: generateMapsLink("Shinjuku Station") },
                    { time: "23:30-01:30", title: "å…¥ä½é…’åº—ä¸ä¼‘æ¯", desc: "å…¥ä½ Hotel Graceryã€‚é•¿é€”æ—…è¡Œåå°½é‡ä¼‘æ¯ã€‚", icon: "ğŸ¨", transport: "æ­¥è¡Œ", duration: "1å°æ—¶", link: generateMapsLink("Hotel Gracery Shinjuku") }
                ]
            },
            {
                day: 2, date: "3æœˆ29æ—¥", title: "å¤è€ä¸ç°ä»£çš„ä¸œäº¬ï¼šæ–‡åŒ–ä¸éœ“è™¹", location: "ä¸œäº¬ (æµ…è‰/æ–°å®¿)",
                events: [
                    { time: "09:00", title: "æµ…è‰å¯º", desc: "ä»ä¸œäº¬æœ€å¤è€çš„å¯ºåº™å¼€å§‹æ–°çš„ä¸€å¤©ã€‚æŠ½ä¸€æ”¯å¾¡ç¥ç­¾ï¼ˆæ±‚ç­¾ï¼‰ã€‚", icon: "â›©ï¸", transport: "åœ°é“", duration: "2å°æ—¶", link: generateMapsLink("Senso-ji Temple") },
                    { time: "11:30", title: "ä»²è§ä¸–å•†åº—è¡—ä¸åˆé¤", desc: "åœ¨å½“åœ°é¤é¦†åƒåˆé¤å‰ï¼Œå“å°æ³¢ç½—é¢åŒ…å’Œç‚¸é¦’å¤´ã€‚", icon: "ğŸ˜", transport: "æ­¥è¡Œ", duration: "1.5å°æ—¶", link: generateMapsLink("Nakamise Street") },
                    { time: "14:30", title: "æ˜æ²»ç¥å®«", desc: "å‚è§‚ä¾›å¥‰æ˜æ²»å¤©çš‡çš„å®é™æ£®æ—ç¥ç¤¾ã€‚ä¸€ç‰‡å®é™çš„å‡€åœŸã€‚", icon: "ğŸŒ³", transport: "åœ°é“", duration: "1.5å°æ—¶", link: generateMapsLink("Meiji Jingu Shrine") },
                    { time: "17:30", title: "å›å¿†æ¨ªä¸ (Omoide Yokocho)", desc: "ç»å…¸â€˜å°ä¾¿æ¨ªä¸â€™ï¼Œäº«ç”¨æ—¥å¼çƒ¤ä¸²æ™šé¤ï¼Œæ„Ÿå—ç»å…¸çš„ä¸œäº¬å¤œç”Ÿæ´»æ°›å›´ã€‚", icon: "ğŸ¢", transport: "æ­¥è¡Œ", duration: "2å°æ—¶", link: generateMapsLink("Omoide Yokocho") },
                    { time: "19:30", title: "æ–°å®¿åå­—è·¯å£ä¸æ­Œèˆä¼ç”º", desc: "è§‚çœ‹ 3D çŒ«å’ªå¹¿å‘Šç‰Œå’Œæ–°å®¿ç’€ç’¨çš„éœ“è™¹ç¯ã€‚", icon: "ğŸŒƒ", transport: "æ­¥è¡Œ", duration: "1å°æ—¶", link: generateMapsLink("Kabukicho Shinjuku") }
                ]
            },
            {
                day: 3, date: "3æœˆ30æ—¥", title: "è‰ºæœ¯ã€ç¾æ™¯ä¸å¯Œå£«å±±ä¸€æ—¥æ¸¸", location: "ä¸œäº¬ (å°åœº) ä¸æ²³å£æ¹–",
                events: [
                    { time: "08:30", title: "TeamLab Planets", desc: "*åŠ¡å¿…æå‰é¢„è®¢ä¸Šåˆæ—¶æ®µ*ã€‚æ²‰æµ¸åœ¨æ•°å­—è‰ºæœ¯ä¹‹ä¸­ã€‚", icon: "âœ¨", transport: "ç«è½¦", duration: "2å°æ—¶", link: generateMapsLink("TeamLab Planets Tokyo") },
                    { time: "11:30", title: "åˆé¤ä¸å‡†å¤‡", desc: "å¿«é€Ÿåˆé¤å¹¶å‡†å¤‡æ­ä¹˜ 2 å°æ—¶çš„ç«è½¦å‰å¾€æ²³å£æ¹–åœ°åŒºã€‚", icon: "ğŸ±", transport: "ç«è½¦", duration: "2.5å°æ—¶", link: generateMapsLink("Shinjuku Station") },
                    { time: "14:30", title: "å¿ çµå¡” (Chureito Pagoda)", desc: "æ ‡å¿—æ€§çš„å®å¡”å’Œå¯Œå£«å±±ç¾æ™¯ã€‚çˆ¬ä¸Š 400 çº§å°é˜¶å¯æ‹åˆ°æœ€ä½³ç…§ç‰‡ã€‚", icon: "ğŸ—»", transport: "ç«è½¦/æ­¥è¡Œ", duration: "2å°æ—¶", link: generateMapsLink("Chureito Pagoda") },
                    { time: "18:00", title: "è¿”å›ä¸œäº¬", desc: "æ­ä¹˜å¯Œå£«ç‰¹å¿«åˆ—è½¦è¿”å›ã€‚æŠµè¾¾æ–°å®¿åäº«ç”¨æ™šé¤ã€‚", icon: "ğŸš…", transport: "ç«è½¦", duration: "2å°æ—¶", link: generateMapsLink("Shinjuku Station") }
                ]
            },
            {
                day: 4, date: "3æœˆ31æ—¥", title: "æ–°å¹²çº¿ä¸äº¬éƒ½ç¥ç¤¾", location: "ä¸œäº¬ -> äº¬éƒ½",
                events: [
                    { time: "09:00", title: "æ–°å¹²çº¿å‰å¾€äº¬éƒ½", desc: "ä¹°ä¸€ä»½è½¦ç«™ä¾¿å½“ (Ekiben) ä½œä¸ºæ—©é¤ã€‚å°½é‡é€‰æ‹©é çª—åº§ä½ (E) ä»¥æ¬£èµå¯Œå£«å±±æ™¯è‰²ã€‚", icon: "ğŸ±", transport: "æ–°å¹²çº¿", duration: "2.5å°æ—¶", link: generateMapsLink("Kyoto Station") },
                    { time: "13:00", title: "ä¼è§ç¨»è·å¤§ç¤¾", desc: "æ•°åƒåº§æœ±çº¢è‰²é¸Ÿå±…ã€‚çˆ¬åˆ°åŠå±±è…°å¯è·å¾—ç»ä½³çš„æ‹ç…§åœ°ç‚¹ã€‚", icon: "â›©ï¸", transport: "JRåˆ—è½¦", duration: "2.5å°æ—¶", link: generateMapsLink("Fushimi Inari Taisha") },
                    { time: "16:30", title: "å…¥ä½ä¸æ”¾æ¾", desc: "å…¥ä½æ‚¨çš„äº¬éƒ½é…’åº—ï¼Œä¼‘æ¯ç‰‡åˆ»ã€‚", icon: "ğŸ¨", transport: "åœ°é“", duration: "1å°æ—¶", link: generateMapsLink("Cross Hotel Kyoto") },
                    { time: "19:00", title: "å…ˆæ–—ç”ºæ™šé¤", desc: "åœ¨é¸­å·æ—çš„ç‹­çª„å°å··ï¼Œä»¥ä¼ ç»Ÿå’Œç°ä»£é¤é¥®é€‰æ‹©è€Œé—»åï¼Œæ°›å›´åè¶³ã€‚", icon: "ğŸ®", transport: "æ­¥è¡Œ", duration: "2å°æ—¶", link: generateMapsLink("Pontocho Alley") }
                ]
            },
            {
                day: 5, date: "4æœˆ01æ—¥", title: "äº¬éƒ½å®é™ã€å¤§é˜ªåŸä¸é“é¡¿å €", location: "äº¬éƒ½ -> å¤§é˜ª",
                events: [
                    { time: "07:30", title: "æ¸…æ°´å¯º", desc: "ææ—©å‡ºå‘è‡³å…³é‡è¦ï¼Œä»¥ä¾¿åœ¨æ²¡æœ‰äººç¾¤çš„æƒ…å†µä¸‹çœ‹åˆ°è‘—åçš„æœ¨åˆ¶èˆå°ã€‚", icon: "ğŸ¯", transport: "å·´å£«/å‡ºç§Ÿè½¦", duration: "2å°æ—¶", link: generateMapsLink("Kiyomizu-dera Temple") },
                    { time: "10:00", title: "äºŒå¹´å‚/ä¸‰å¹´å‚", desc: "æ²¿ç€ä¿å­˜å®Œå¥½çš„è¡—é“ä»å¯ºåº™æ­¥è¡Œã€‚æ‰¾ä¸€å®¶å’–å•¡é¦†ä¼‘æ¯ã€‚", icon: "â˜•", transport: "æ­¥è¡Œ", duration: "1.5å°æ—¶", link: generateMapsLink("Ninenzaka and Sannenzaka Kyoto") },
                    { time: "12:00", title: "å“²å­¦ä¹‹é“ä¸åˆé¤", desc: "æ²¿ç€æ¨±èŠ±æ ‘æˆè«çš„è¿æ²³æ•£æ­¥ã€‚åœ¨ç¥‡å›­é™„è¿‘å¿«é€Ÿåˆé¤ã€‚", icon: "ğŸŒ¸", transport: "å·´å£«", duration: "2å°æ—¶", link: generateMapsLink("Philosopher's Path Kyoto") },
                    { time: "14:30", title: "å‰å¾€å¤§é˜ª", desc: "ä»äº¬éƒ½ç«™å‰å¾€å¤§é˜ªç«™ã€‚", icon: "ğŸš†", transport: "JRçº¿", duration: "1å°æ—¶", link: generateMapsLink("Osaka Station") },
                    { time: "15:30", title: "å¤§é˜ªåŸ (æ¬è¿)", desc: "å¿«é€Ÿå‚è§‚åŸå ¡åº­é™¢å’Œå¤–è§‚æ‹ç…§ã€‚", icon: "ğŸ°", transport: "åœ°é“", duration: "1.5å°æ—¶", link: generateMapsLink("Osaka Castle") },
                    { time: "17:00", title: "å…¥ä½ USJ åœ°åŒºé…’åº—", desc: "å‰å¾€ç¯çƒå½±åŸ (Universal City) åœ°åŒºå¹¶å…¥ä½ The Park Front Hotelã€‚", icon: "ğŸ¨", transport: "JRçº¿", duration: "1.5å°æ—¶", link: generateMapsLink("The Park Front Hotel at Universal Studios Japan") },
                    { time: "19:30", title: "é“é¡¿å €ä¹‹ä¹", desc: "æ ‡å¿—æ€§çš„æ ¼åŠ›é«˜äººå¹¿å‘Šç‰Œã€è¡—å¤´ç¾é£Ÿå’Œå……æ»¡æ´»åŠ›çš„å¤œç”Ÿæ´»ã€‚", icon: "ğŸ™", transport: "åœ°é“", duration: "3å°æ—¶", link: generateMapsLink("Dotonbori Osaka") }
                ]
            },
            {
                day: 6, date: "4æœˆ02æ—¥", title: "æ—¥æœ¬ç¯çƒå½±åŸ (USJ)", location: "å¤§é˜ª (USJ)",
                events: [
                    { time: "08:00", title: "USJ å…¥å›­", desc: "ææ—©æŠµè¾¾ï¼Œç›´å¥”è¶…çº§ä»»å¤©å ‚ä¸–ç•Œ (Super Nintendo World)ï¼ˆç¡®ä¿æ‚¨æœ‰åŒºåŸŸå…¥åœºåˆ¸æˆ–å¿«é€Ÿé€šè¡Œè¯ï¼‰ã€‚", icon: "ğŸ„", transport: "æ­¥è¡Œ", duration: "å…¨å¤©", link: generateMapsLink("Universal Studios Japan") },
                    { time: "12:00", title: "é­”æ³•ä¸–ç•Œåˆé¤", desc: "åœ¨å“ˆåˆ©æ³¢ç‰¹ä¸»é¢˜åŒºäº«ç”¨åˆé¤å’Œé»„æ²¹å•¤é…’ã€‚", icon: "ğŸª„", transport: "æ­¥è¡Œ", duration: "2å°æ—¶", link: generateMapsLink("Universal Studios Japan") },
                    { time: "17:00", title: "ä¸»é¢˜æ¸¸ä¹è®¾æ–½", desc: "äº«å—å‰©ä½™çš„ä¸»é¢˜æ¸¸ä¹è®¾æ–½ï¼ˆä¾ç½—çºªå…¬å›­ã€èœ˜è››ä¾ ç­‰ï¼‰ã€‚", icon: "ğŸ¢", transport: "æ­¥è¡Œ", duration: "3å°æ—¶", link: generateMapsLink("Universal Studios Japan") },
                    { time: "20:00", title: "CityWalk æ™šé¤", desc: "åœ¨å…¬å›­å¤§é—¨å¤–çš„ CityWalk äº«å—è½»æ¾çš„æ™šé¤ã€‚", icon: "ğŸ”", transport: "æ­¥è¡Œ", duration: "1.5å°æ—¶", link: generateMapsLink("Universal CityWalk Osaka") }
                ]
            },
            {
                day: 7, date: "4æœˆ03æ—¥", title: "å¤§é˜ªå‡ºå‘ â†’ å‰éš†å¡ (æ—©ç­æœº)", location: "å¤§é˜ª (KIX) â†’ å‰éš†å¡",
                events: [
                    { time: "06:00", title: "é€€æˆ¿ä¸å‰å¾€æœºåœº", desc: "ä» USJ åœ°åŒºæ­ä¹˜ JR å¿«é€Ÿçº¿å‰å¾€å…³è¥¿å›½é™…æœºåœº (KIX)ã€‚ææ—©å‰å¾€ä»¥é¿å…æ‹¥å µã€‚", icon: "ğŸš–", transport: "JRçº¿", duration: "1.5å°æ—¶", link: generateMapsLink("Kansai International Airport KIX") },
                    { time: "08:00", title: "åŠç†ç™»æœºæ‰‹ç»­ä¸ç¦»å¢ƒ", desc: "åŠç†ç™»æœºæ‰‹ç»­ï¼Œé€šè¿‡å®‰æ£€ï¼Œå¹¶äº«å—æœ€åä¸€åˆ»çš„è´­ç‰©ã€‚", icon: "ğŸ›ï¸", transport: "å€¼æœº", duration: "2å°æ—¶", link: "https://www.kansai-airport.or.jp/cn/" },
                    { time: "10:30", title: "è¿”å›å‰éš†å¡", desc: "å¸Œæœ›æ‚¨å¸¦ç€ç¾å¥½çš„å›å¿†å’Œç…§ç‰‡æ»¡è½½è€Œå½’ï¼", icon: "ğŸ‘‹", transport: "é£æœº", duration: "6.5å°æ—¶", link: "" }
                ]
            }
        ];

        const itineraryDataEN = [
            {
                day: 1, date: "Mar 28", title: "KUL Departure & Tokyo Arrival (Late)", location: "Tokyo (Shinjuku)",
                events: [
                    { time: "TBD", title: "Depart KUL", desc: "Enjoy your flight! Check the train schedules (NEX/Skyliner) for your arrival airport (NRT/HND) based on actual flight time.", icon: "âœˆï¸", transport: "Plane", duration: "7h", link: "https://www.narita-airport.jp/en/access/train" },
                    { time: "20:00-22:50", title: "Arrival & Customs", desc: "Clear customs and immigration. Pick up pre-booked items (e.g., WiFi, etc.).", icon: "ğŸ›‚", transport: "Customs", duration: "1h", link: "https://www.narita-airport.jp/en/access" },
                    { time: "22:00-00:30", title: "Train/Taxi to Shinjuku", desc: "Take the fastest available option to Shinjuku. Be aware that most express trains stop running around 11 PM.", icon: "ğŸš…", transport: "Train/Taxi", duration: "1.5h", link: generateMapsLink("Shinjuku Station") },
                    { time: "23:30-01:30", title: "Check-in Hotel & Rest", desc: "Settle into Hotel Gracery. Maximize rest after the long journey.", icon: "ğŸ¨", transport: "Walk", duration: "1h", link: generateMapsLink("Hotel Gracery Shinjuku") }
                ]
            },
            {
                day: 2, date: "Mar 29", title: "Old & New Tokyo: Culture & Neon", location: "Tokyo (Asakusa/Shinjuku)",
                events: [
                    { time: "09:00", title: "Senso-ji Temple", desc: "Start the day with the city's oldest temple. Draw an Omikuji (fortune).", icon: "â›©ï¸", transport: "Subway", duration: "2h", link: generateMapsLink("Senso-ji Temple") },
                    { time: "11:30", title: "Nakamise Street & Lunch", desc: "Snack on Melon Pan and Agemanju before grabbing a quick, local lunch.", icon: "ğŸ˜", transport: "Walk", duration: "1.5h", link: generateMapsLink("Nakamise Street") },
                    { time: "14:30", title: "Meiji Jingu Shrine", desc: "Visit the serene forested shrine dedicated to Emperor Meiji. A peaceful escape.", icon: "ğŸŒ³", transport: "Subway", duration: "1.5h", link: generateMapsLink("Meiji Jingu Shrine") },
                    { time: "17:30", title: "Omoide Yokocho", desc: "Classic 'Piss Alley' for Yakitori dinner and a classic Tokyo nightlife vibe.", icon: "ğŸ¢", transport: "Walk", duration: "2h", link: generateMapsLink("Omoide Yokocho") },
                    { time: "19:30", title: "Shinjuku Crossing & Kabukicho", desc: "See the 3D Cat billboard and bright neon signs of Shinjuku.", icon: "ğŸŒƒ", transport: "Walk", duration: "1h", link: generateMapsLink("Kabukicho Shinjuku") }
                ]
            },
            {
                day: 3, date: "Mar 30", title: "Art, Views & Fuji Day Trip", location: "Tokyo (Odaiba) & Kawaguchiko",
                events: [
                    { time: "08:30", title: "TeamLab Planets", desc: "*Must book morning time slot in advance*. Immerse yourselves in the digital art.", icon: "âœ¨", transport: "ç«è½¦", duration: "2h", link: generateMapsLink("TeamLab Planets Tokyo") },
                    { time: "11:30", title: "Lunch & Travel Prep", desc: "Quick lunch and prepare for the 2-hour train ride to Kawaguchiko area.", icon: "ğŸ±", transport: "Train", duration: "2.5h", link: generateMapsLink("Shinjuku Station") },
                    { time: "14:30", title: "Chureito Pagoda", desc: "The iconic Pagoda and Mt Fuji view. Take the 400 steps for the best photo.", icon: "ğŸ—»", transport: "Train/Walk", duration: "2h", link: generateMapsLink("Chureito Pagoda") },
                    { time: "18:00", title: "Return to Tokyo", desc: "Take the Fuji Excursion Limited Express back. Dinner at Shinjuku upon arrival.", icon: "ğŸš…", transport: "Train", duration: "2h", link: generateMapsLink("Shinjuku Station") }
                ]
            },
            {
                day: 4, date: "Mar 31", title: "Shinkansen & Kyoto Shrines", location: "Tokyo -> Kyoto",
                events: [
                    { time: "09:00", title: "Shinkansen to Kyoto", desc: "Grab an Ekiben (station bento) for breakfast. Aim for a window seat (E) for potential Fuji view.", icon: "ğŸ±", transport: "Shinkansen", duration: "2.5h", link: generateMapsLink("Kyoto Station") },
                    { time: "13:00", title: "Fushimi Inari Taisha", desc: "Thousands of vermillion Torii gates. Hike halfway up for great photo spots.", icon: "â›©ï¸", transport: "JR Train", duration: "2.5h", link: generateMapsLink("Fushimi Inari Taisha") },
                    { time: "16:30", title: "Check-in & Relaxation", desc: "Check into your Kyoto hotel and take a moment to refresh.", icon: "ğŸ¨", transport: "Subway", duration: "1h", link: generateMapsLink("Cross Hotel Kyoto") },
                    { time: "19:00", title: "Pontocho Alley Dinner", desc: "Atmospheric narrow alley known for traditional and modern dining options by the Kamo River.", icon: "ğŸ®", transport: "Walk", duration: "2h", link: generateMapsLink("Pontocho Alley") }
                ]
            },
            {
                day: 5, date: "Apr 01", title: "Kyoto Serenity, Osaka Castle & Dotonbori", location: "Kyoto -> Osaka",
                events: [
                    { time: "07:30", title: "Kiyomizu-dera", desc: "Early start is vital to see the famous wooden stage without crowds.", icon: "ğŸ¯", transport: "Bus/Taxi", duration: "2h", link: generateMapsLink("Kiyomizu-dera Temple") },
                    { time: "10:00", title: "Ninenzaka/Sannenzaka Streets", desc: "Walk the beautifully preserved streets leading from the temple. Grab a coffee.", icon: "â˜•", transport: "Walk", duration: "1.5h", link: generateMapsLink("Ninenzaka and Sannenzaka Kyoto") },
                    { time: "12:00", title: "Philosopher's Path & Lunch", desc: "A relaxing cherry tree-lined canal walk. Quick lunch near Gion.", icon: "ğŸŒ¸", transport: "Bus", duration: "2h", link: generateMapsLink("Philosopher's Path Kyoto") },
                    { time: "14:30", title: "Train to Osaka", desc: "Travel from Kyoto to Osaka station.", icon: "ğŸš†", transport: "JR Line", duration: "1h", link: generateMapsLink("Osaka Station") },
                    { time: "15:30", title: "Osaka Castle (Relocated)", desc: "Quick visit to the castle grounds and exterior for photos.", icon: "ğŸ°", transport: "Subway", duration: "1.5h", link: generateMapsLink("Osaka Castle") },
                    { time: "17:00", title: "Check-in USJ Area Hotel", desc: "Travel to the Universal City area and check into The Park Front Hotel.", icon: "ğŸ¨", transport: "JR Line", duration: "1.5h", link: generateMapsLink("The Park Front Hotel at Universal Studios Japan") },
                    { time: "19:30", title: "Dotonbori Fun", desc: "Iconic Glico Man sign, street food, and vibrant nightlife.", icon: "ğŸ™", transport: "Subway", duration: "3h", link: generateMapsLink("Dotonbori Osaka") }
                ]
            },
            {
                day: 6, date: "Apr 02", title: "Universal Studios Japan (USJ)", location: "Osaka (USJ)",
                events: [
                    { time: "08:00", title: "USJ Entry", desc: "Arrive early and head straight to Super Nintendo World (Ensure you have an Area Entry Ticket or Express Pass).", icon: "ğŸ„", transport: "æ­¥è¡Œ", duration: "All Day", link: generateMapsLink("Universal Studios Japan") },
                    { time: "12:00", title: "Wizarding World Lunch", desc: "Enjoy lunch and Butterbeer in the Harry Potter themed area.", icon: "ğŸª„", transport: "Walk", duration: "2h", link: generateMapsLink("Universal Studios Japan") },
                    { time: "17:00", title: "Themed Rides", desc: "Enjoy the remaining themed rides (Jurassic Park, Spiderman, etc.)", icon: "ğŸ¢", transport: "Walk", duration: "3h", link: generateMapsLink("Universal Studios Japan") },
                    { time: "20:00", title: "CityWalk Dinner", desc: "Relaxed dinner outside the park gates.", icon: "ğŸ”", transport: "Walk", duration: "1.5h", link: generateMapsLink("Universal CityWalk Osaka") }
                ]
            },
            {
                day: 7, date: "Apr 03", title: "Osaka Departure â†’ KUL (Early Flight)", location: "Osaka (KIX) â†’ KUL",
                events: [
                    { time: "06:00", title: "Check-out & Travel to KIX", desc: "Take the JR Rapid Line from USJ area to Kansai International Airport (KIX). Leave early to avoid delays.", icon: "ğŸš–", transport: "JR Line", duration: "1.5h", link: generateMapsLink("Kansai International Airport KIX") },
                    { time: "08:00", title: "Check-in & Departure", desc: "Check in, clear security, and enjoy some last-minute duty-free shopping.", icon: "ğŸ›ï¸", transport: "å€¼æœº", duration: "2h", link: "https://www.kansai-airport.or.jp/en/" },
                    { time: "10:30", title: "Return to KUL", desc: "Hope you enjoyed the trip and return home with wonderful memories and photos!", icon: "ğŸ‘‹", transport: "Plane", duration: "6.5h", link: "" }
                ]
            }
        ];

        const foodDataCN = [
            { name: "ä¸€å…°æ‹‰é¢ (æ–°å®¿)", city: "ä¸œäº¬", category: "main", desc: "è‘—åçš„æµ“éƒçŒªéª¨æ±¤åº•ã€‚æ¨èå•äººéš”é—´ä½“éªŒã€‚", icon: "ğŸœ" },
            { name: "ç­‘åœ°å¸‚åœº (åœºå¤–)", city: "ä¸œäº¬", category: "main", desc: "æ–°é²œçš„æµ·é²œç›–é¥­ã€ç‰å­çƒ§ï¼ˆé¸¡è›‹å·ï¼‰å’Œå„ç§è¡—å¤´å°åƒã€‚", icon: "ğŸ£" },
            { name: "ç« é±¼çƒ§ (ãŸã“ã‚„ã)", city: "å¤§é˜ª", category: "snack", desc: "å¤§é˜ªçš„æ ‡å¿—æ€§è¡—å¤´ç¾é£Ÿã€‚é“é¡¿å €æœ‰è®¸å¤šè‘—åçš„æ‘Šä½ã€‚", icon: "ğŸ™" },
            { name: "æŠ¹èŒ¶ç”œç‚¹", city: "äº¬éƒ½", category: "cafe", desc: "åœ¨ç¥—å›­æˆ–äºŒå¹´å‚å¯»æ‰¾ä¸€å®¶èŒ¶å±‹ï¼Œå“å°æŠ¹èŒ¶å†°æ·‡æ·‹æˆ–è•¨é¥¼ã€‚", icon: "ğŸµ" },
            { name: "è“¬è± 551 (è±šåŒ…)", city: "å¤§é˜ª", category: "snack", desc: "å·¨å¤§ä¸”å¤šæ±çš„è‚‰åŒ…ï¼Œå¤§é˜ªçš„æ’é˜Ÿç¾é£Ÿã€‚", icon: "ğŸ¥Ÿ" },
            { name: "æ—¥å¼ç‚¸ä¸² (ä¸²ã‚«ãƒ„)", city: "å¤§é˜ª", category: "main", desc: "å°†è‚‰å’Œè”¬èœä¸²èµ·æ¥æ²¹ç‚¸ï¼Œé…ä¸Šç”œé…±ã€‚", icon: "ğŸ¤" }
        ];

        const foodDataEN = [
            { name: "Ichiran Ramen (Shinjuku)", city: "Tokyo", category: "main", desc: "Famous for its rich tonkotsu broth. Recommended for the unique solo dining booths.", icon: "ğŸœ" },
            { name: "Tsukiji Outer Market", city: "Tokyo", category: "main", desc: "Fresh seafood bowls, Tamagoyaki (egg roll), and various street snacks.", icon: "ğŸ£" },
            { name: "Takoyaki (Octopus Balls)", city: "Osaka", category: "snack", desc: "Osaka's iconic street food. Many famous stalls in Dotonbori.", icon: "ğŸ™" },
            { name: "Matcha Desserts", city: "Kyoto", category: "cafe", desc: "Find a teahouse in Gion or Ninenzaka for Matcha ice cream or Warabi mochi.", icon: "ğŸµ" },
            { name: "551 Horai (Pork Buns)", city: "Osaka", category: "snack", desc: "Giant, juicy pork buns. A must-queue food item in Osaka.", icon: "ğŸ¥Ÿ" },
            { name: "Kushikatsu (Fried Skewers)", city: "Osaka", category: "main", desc: "Skewered and deep-fried meat and vegetables with sweet sauce.", icon: "ğŸ¤" }
        ];

        // --- UPDATED REALISTIC BUDGET DATA for 2 pax (Total RM 10,740) ---
        // New Allocation: Flights(3500), Accom(2100), Transport(1400), Food(1540), Entertainment(1500), Buffer(700) = 10740
        const budgetData = [3500, 2100, 1400, 1540, 1500, 700]; 
        
        const chartLabelsCN = ["æœºç¥¨", "ä½å®¿", "æœ¬åœ°äº¤é€š/æ–°å¹²çº¿", "é¤é¥®", "å¨±ä¹/é—¨ç¥¨", "è´­ç‰©/ç¼“å†²"];
        const chartLabelsEN = ["Flights", "Accommodation", "Local Transport/Shinkansen", "Food & Drinks", "Entertainment/Tickets", "Shopping/Buffer"];

        const detailedBreakdown = [
            {
                category_cn: "æœºç¥¨ (KUL-JPN å¾€è¿”, 2äºº)", 
                category_en: "Flights (KUL-JPN R/T, 2 pax)", 
                cost: 3500, 
                details_cn: "2å¼ å»‰ä»·èˆªç©ºå¾€è¿”æœºç¥¨ @ RM 1,750/å¼ ã€‚", 
                details_en: "2x budget R/T Tickets @ RM 1,750/ticket." 
            },
            {
                category_cn: "ä½å®¿ (6æ™š)", 
                category_en: "Accommodation (6 Nights)", 
                cost: 2100, 
                details_cn: "6æ™šé…’åº—ä½å®¿ (å¹³å‡ RM 350/æ™š)ã€‚èƒ½æä¾›èˆ’é€‚ã€ä½ç½®è‰¯å¥½çš„ 3-4 æ˜Ÿçº§é…’åº—ã€‚", 
                details_en: "6 nights hotel stay (Avg. RM 350/night). Allows for comfortable, well-located 3-4 star hotels." 
            },
            {
                category_cn: "æœ¬åœ°äº¤é€šä¸åŸé™…äº¤é€š (2äºº)", 
                category_en: "Local & Inter-City Transport (2 pax)", 
                cost: 1400, 
                details_cn: "æ–°å¹²çº¿ä¸œäº¬-äº¬éƒ½ 2äºº (çº¦ RM 900)ï¼Œæœ¬åœ°åœ°é“/å·´å£«å¡ 2äºº (çº¦ RM 500)ã€‚", 
                details_en: "Shinkansen Tokyo-Kyoto for 2 pax (Approx. RM 900), Local Subway/IC Card for 2 pax (Approx. RM 500)." 
            },
            {
                category_cn: "é¤é¥® (7å¤©)", 
                category_en: "Food & Drinks (7 Days)", 
                cost: 1540, 
                details_cn: "å¹³å‡æ¯æ—¥ RM 220 (2äºº)ï¼Œå¯äº«å—ä¸­æ¡£é¤å…å’Œè¡—å¤´ç¾é£Ÿã€‚", 
                details_en: "Avg. RM 220 per day (2 pax), allowing for mid-range restaurants and street food indulgences." 
            },
            {
                category_cn: "å¨±ä¹/é—¨ç¥¨ (2äºº)", 
                category_en: "Entertainment/Tickets (2 pax)", 
                cost: 1500, 
                details_cn: "USJ é—¨ç¥¨ + å¿«é€Ÿé€šè¡Œè¯ 2äºº (çº¦ RM 1350)ï¼ŒTeamLab Planets 2äºº (çº¦ RM 150)ã€‚", 
                details_en: "USJ Ticket + Express Pass for 2 pax (Approx. RM 1350), TeamLab Planets for 2 pax (Approx. RM 150)." 
            },
            {
                category_cn: "è´­ç‰©ä¸ç¼“å†²", 
                category_en: "Shopping & Buffer", 
                cost: 700, 
                details_cn: "æ›´å……è£•çš„é‡‘é¢ç”¨äºçºªå¿µå“å’Œåº”å¯¹æ„å¤–æ”¯å‡ºã€‚", 
                details_en: "A more generous amount for souvenirs and unforeseen expenses." 
            }
        ];


        // --- Core Functions ---

        function updateContent(lang) {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translationMap[key] && translationMap[key][lang]) {
                    element.textContent = translationMap[key][lang];
                }
            });
            
            // Check and update the specific chart note element
            const chartNote1Element = document.querySelector('#overview p[data-i18n="chart_note_1"]');
            if (chartNote1Element) {
                chartNote1Element.textContent = translationMap.chart_note_1[lang];
            }

            // Update title
            document.getElementById('doc-title').textContent = (lang === 'cn' ? 'æ—¥æœ¬èœœæœˆä¹‹æ—… - RM 10,740 é¢„ç®—' : 'Japan Honeymoon Itinerary - RM 10,740 Budget');

            // Update Food Filters (since text is dynamically set)
            document.querySelectorAll('.food-filter').forEach(btn => {
                const key = btn.getAttribute('data-i18n');
                if (translationMap[key] && translationMap[key][lang]) {
                    btn.textContent = translationMap[key][lang];
                }
            });
            
            // Re-render itinerary, charts, and budget details
            renderDayTabs(lang);
            renderCharts(lang);
            renderFoodGrid('all'); // Re-render food grid with current filter
            renderBudgetDetails(lang); // New: Render budget details table
        }

        function toggleLanguage() {
            currentLang = currentLang === 'cn' ? 'en' : 'cn';
            const button = document.getElementById('lang-toggle-btn');
            
            if (currentLang === 'cn') {
                button.textContent = "English";
                document.documentElement.lang = 'zh-CN';
            } else {
                button.textContent = "ä¸­æ–‡";
                document.documentElement.lang = 'en';
            }
            updateContent(currentLang);
        }

        // --- Itinerary Functions ---

        function renderDayTabs(lang) {
            const data = lang === 'cn' ? itineraryDataCN : itineraryDataEN;
            const container = document.getElementById('day-tabs');
            container.innerHTML = '';
            
            // Determine the currently active day index or default to 0
            const activeBtn = document.querySelector('#day-tabs button.bg-rose-500');
            const initialDayIndex = activeBtn ? parseInt(activeBtn.getAttribute('data-day-index')) : 0;
            let currentActiveIndex = initialDayIndex;

            // Base classes for the button
            const baseClasses = 'flex-shrink-0 px-4 py-2 text-sm font-medium rounded-full transition-colors whitespace-nowrap md:w-full';

            data.forEach((dayData, index) => {
                const isActive = index === currentActiveIndex; 
                const button = document.createElement('button');
                
                button.className = `${baseClasses} ${
                    isActive ? 'bg-rose-500 text-white shadow-md' : 'bg-white text-slate-700 hover:bg-slate-100'
                }`;
                button.textContent = `${data[index].day === 7 ? data[index].date : (lang === 'cn' ? 'ç¬¬' + dayData.day + 'å¤©' : 'Day ' + dayData.day)} (${dayData.location.split(' ').pop().replace(')', '')})`;
                button.setAttribute('data-day-index', index);
                
                button.onclick = (e) => {
                    // Deactivate all
                    document.querySelectorAll('#day-tabs button').forEach(btn => {
                        // Apply the full set of base/inactive classes
                        btn.className = `${baseClasses} bg-white text-slate-700 hover:bg-slate-100`;
                    });
                    // Activate current
                    e.currentTarget.className = `${baseClasses} bg-rose-500 text-white shadow-md`;
                    renderItineraryTimeline(index);
                };
                container.appendChild(button);
            });

            // Apply grid class for desktop layout and re-render initial content
            container.classList.add('md:grid', 'md:grid-cols-7', 'md:gap-4');
            renderItineraryTimeline(currentActiveIndex);
        }


        function renderItineraryTimeline(dayIndex) {
            const data = currentLang === 'cn' ? itineraryDataCN : itineraryDataEN;
            const dayData = data[dayIndex];
            const container = document.getElementById('itinerary-content');
            
            const linkText = currentLang === 'cn' ? 'åœ°å›¾/é“¾æ¥' : 'Map/Link';

            let timelineHtml = `
                <div class="mb-6 border-b pb-4">
                    <h3 class="text-2xl font-bold text-slate-900">${dayData.title}</h3>
                    <p class="text-sm text-slate-500">${dayData.date} | ${dayData.location}</p>
                </div>
            `;

            timelineHtml += `
                <div class="space-y-8 relative">
                    <!-- Vertical Line (Aligned to the left) -->
                    <div class="absolute w-0.5 bg-rose-200 left-4 top-0 bottom-0"></div>
            `;

            dayData.events.forEach((event) => {
                
                timelineHtml += `
                    <div class="relative flex items-start w-full">
                        
                        <!-- Icon Circle (Centered on the Vertical Line at left-4) -->
                        <div class="absolute top-0 left-4 flex items-center justify-center w-8 h-8 rounded-full bg-rose-500 text-white z-10 shadow-lg ring-4 ring-slate-50 transform -translate-x-1/2">
                            ${event.icon}
                        </div>
                        
                        <!-- Content Panel (Starts after the icon/line, using pl-12) -->
                        <div class="flex-1 pl-12">
                            <div class="bg-white p-4 rounded-xl shadow-md border border-slate-100 transition-all hover:shadow-lg">
                                <p class="text-xs font-semibold uppercase text-rose-500">${event.time} (${event.duration})</p>
                                <h4 class="mt-1 text-lg font-bold text-slate-900">${event.title}</h4>
                                <p class="mt-2 text-sm text-slate-600">${event.desc}</p>
                                
                                ${event.link ? `<a href="${event.link}" target="_blank" class="mt-3 inline-flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-800 transition-colors">
                                    ${event.transport} &rarr; ${linkText}
                                </a>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            });

            timelineHtml += `</div>`;
            container.innerHTML = timelineHtml;
        }

        // --- Food Functions ---

        function renderFoodGrid(filter) {
            const data = currentLang === 'cn' ? foodDataCN : foodDataEN;
            const container = document.getElementById('food-grid');
            container.innerHTML = '';

            const filteredData = filter === 'all' ? data : data.filter(item => item.category === filter);

            filteredData.forEach(item => {
                const categoryClass = {
                    main: 'bg-indigo-100 text-indigo-700',
                    snack: 'bg-yellow-100 text-yellow-700',
                    cafe: 'bg-green-100 text-green-700'
                }[item.category] || 'bg-slate-100 text-slate-700';

                const card = document.createElement('div');
                card.className = "bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow";
                card.innerHTML = `
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-3">
                            <div class="text-3xl">${item.icon}</div>
                            <span class="text-xs font-semibold px-3 py-1 rounded-full ${categoryClass}">${item.city}</span>
                        </div>
                        <h3 class="text-xl font-bold text-slate-900">${item.name}</h3>
                        <p class="mt-2 text-sm text-slate-600">${item.desc}</p>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function filterFood(filter, event) {
            document.querySelectorAll('.food-filter').forEach(btn => {
                btn.classList.remove('bg-rose-100', 'text-rose-700');
                btn.classList.add('bg-white', 'text-slate-700');
            });
            event.target.classList.add('bg-rose-100', 'text-rose-700');
            event.target.classList.remove('bg-white', 'text-slate-700');
            renderFoodGrid(filter);
        }
        
        // --- Chart Functions ---
        
        function renderCharts(lang) {
            const labels = lang === 'cn' ? chartLabelsCN : chartLabelsEN;
            // Budget data: [Flights, Accommodation, Local Transport/Shinkansen, Food & Drinks, Entertainment/Tickets, Shopping/Buffer]
            const data = budgetData; 

            // Budget Chart (Doughnut)
            const budgetCtx = document.getElementById('budgetChart');
            if (!budgetCtx) return; // Guard clause if canvas is not found
            if (budgetChartInstance) { budgetChartInstance.destroy(); }
            
            budgetChartInstance = new Chart(budgetCtx.getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        // Custom colors optimized for new distribution
                        backgroundColor: ['#1d4ed8', '#059669', '#f97316', '#ef4444', '#8b5cf6', '#a1a1aa'],
                        hoverOffset: 16,
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#475569',
                                font: {
                                    size: 12
                                }
                            }
                        }
                    }
                }
            });

            // Comparison Chart (Bar) - Using the same labels but arbitrary data for time/cost balance
            const comparisonCtx = document.getElementById('comparisonChart');
            if (!comparisonCtx) return; // Guard clause if canvas is not found
            if (comparisonChartInstance) { comparisonChartInstance.destroy(); }
            
            // Generate comparison data based on the new number of labels (6)
            // Flights(5), Accomm(3), Transport(4), Food(4), Entertainment(5), Shopping(2)
            const comparisonData = [5, 3, 4, 4, 5, 2]; 
            
            comparisonChartInstance = new Chart(comparisonCtx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: lang === 'cn' ? 'æˆæœ¬/æ—¶é—´å¹³è¡¡ (1-5)' : 'Cost/Time Balance (1-5)',
                        data: comparisonData,
                        backgroundColor: '#fb7185', // rose-400
                        borderRadius: 8,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 5,
                            ticks: {
                                stepSize: 1
                            }
                        },
                        x: {
                            // Ensure the x-axis labels are readable
                            ticks: {
                                color: '#475569',
                                font: {
                                    size: 10
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        // --- Budget Detail Functions ---

        function renderBudgetDetails(lang) {
            const container = document.getElementById('budget-details-content');
            let tableHtml = `
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-slate-200">
                        <thead class="bg-slate-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">${lang === 'cn' ? 'ç±»åˆ«' : 'Category'}</th>
                                <th class="px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider">${lang === 'cn' ? 'é‡‘é¢ (RM)' : 'Cost (RM)'}</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">${lang === 'cn' ? 'è¯¦æƒ…/å¤‡æ³¨' : 'Details/Notes'}</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-slate-200">
            `;
            let totalCost = 0;

            detailedBreakdown.forEach(item => {
                totalCost += item.cost;
                tableHtml += `
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900">${lang === 'cn' ? item.category_cn : item.category_en}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-rose-600">RM ${item.cost.toLocaleString('en-US')}</td>
                        <td class="px-6 py-4 text-sm text-slate-500">${lang === 'cn' ? item.details_cn : item.details_en}</td>
                    </tr>
                `;
            });

            // Total Row
            tableHtml += `
                        <tr class="bg-slate-100 font-extrabold">
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-900">${lang === 'cn' ? 'æ€»è®¡' : 'TOTAL ESTIMATE'}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-right text-indigo-600">RM ${totalCost.toLocaleString('en-US')}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-900"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            `;
            container.innerHTML = tableHtml;
        }

        function toggleBudgetDetails() {
            const content = document.getElementById('budget-details-content');
            const icon = document.getElementById('toggle-icon');
            const isHidden = content.classList.contains('hidden');

            if (isHidden) {
                content.classList.remove('hidden');
                icon.textContent = 'â–²';
            } else {
                content.classList.add('hidden');
                icon.textContent = 'â–¼';
            }
        }

        // --- Initialization ---

        window.onload = () => {
            // Initial render in Chinese (default)
            updateContent('cn');
            
            // Set up language toggle listener
            document.getElementById('lang-toggle-btn').addEventListener('click', toggleLanguage);
            
            // The initial render is handled by updateContent('cn');
        };

        // Simplified mobile menu toggle (for completeness)
        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        });
        
    </script>
</body>
</html>
